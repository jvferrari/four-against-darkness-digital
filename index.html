<!-- NOVO index.html (versão simplificada e corrigida) -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Four Against Darkness</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <style>
        /* CSS adicional para teste */
        .debug { border: 1px solid red; }
        .grid-test { 
            display: grid; 
            grid-template-columns: repeat(5, 20px);
            gap: 2px;
            margin: 10px 0;
        }
        .grid-cell {
            width: 20px;
            height: 20px;
            border: 1px solid #666;
            text-align: center;
            line-height: 20px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <!-- Tela de Início -->
    <div id="start-screen" class="screen active">
        <div class="start-container">
            <h1>Four Against Darkness</h1>
            <p class="version">Protótipo v0.1</p>
            <div class="start-buttons">
                <button id="new-game-btn" class="btn-primary">Nova Aventura</button>
                <button id="load-game-btn" class="btn-secondary" style="display:none">Carregar Jogo</button>
            </div>
            <p style="margin-top: 30px; color: #888; font-size: 0.9rem;">
                Um jogo solo de RPG de masmorra procedural
            </p>
        </div>
    </div>

    <!-- Tela de Seleção de Classes -->
    <div id="class-select-screen" class="screen">
        <div class="class-select-container">
            <h2>Crie sua Equipe</h2>
            <p>Selecione 4 classes para sua aventura:</p>
            
            <div id="class-grid" class="class-grid">
                <!-- Classes serão carregadas aqui -->
            </div>
            
            <div class="selected-classes">
                <h3>Equipe Selecionada (<span id="selected-count">0</span>/4)</h3>
                <div id="selected-classes-list" class="selected-list">
                    <!-- Classes selecionadas aparecerão aqui -->
                </div>
            </div>
            
            <div class="class-select-controls">
                <button id="back-to-start-btn" class="btn-secondary">Voltar</button>
                <button id="confirm-party-btn" class="btn-primary" disabled>Iniciar Aventura</button>
            </div>
        </div>
    </div>

    <!-- Tela Principal do Jogo -->
    <div id="game-screen" class="screen">
        <div class="game-header">
            <h2>Four Against Darkness</h2>
            <div class="game-info">
                <span id="room-info">Sala: Inicial</span>
                <span id="gold-info">Ouro: 0</span>
            </div>
        </div>
        
        <div class="game-layout">
            <!-- Painel Esquerdo: Mapa -->
            <div class="dungeon-map">
                <h3>Mapa da Masmorra</h3>
                <div id="dungeon-map" class="map-grid">
                    <!-- Mapa será renderizado aqui -->
                </div>
                <div class="map-legend">
                    <div class="legend-item"><span class="legend-cell current"></span> Você está aqui</div>
                    <div class="legend-item"><span class="legend-cell explored"></span> Explorado</div>
                    <div class="legend-item"><span class="legend-cell entrance"></span> Entrada</div>
                </div>
            </div>
            
            <!-- Painel Central: Jogo -->
            <div class="main-game-area">
                <div id="current-room-container" class="current-room">
                    <!-- Sala atual será renderizada aqui -->
                </div>
                
                <div id="content-container" class="room-content">
                    <!-- Conteúdo da sala -->
                </div>
                
                <div id="controls-container" class="game-controls">
                    <!-- Controles -->
                </div>
                
                <div class="game-log">
                    <h4>Log de Aventura</h4>
                    <div id="game-log" class="log-messages">
                        <!-- Mensagens do jogo -->
                    </div>
                </div>
            </div>
            
            <!-- Painel Direito: Party -->
            <div class="party-panel">
                <h3>Sua Equipe</h3>
                <div id="party-status" class="party-status">
                    <!-- Status dos personagens -->
                </div>
                <button id="save-game-btn" class="btn-secondary" style="margin-top: 20px;">Salvar Jogo</button>
                <button id="quit-game-btn" class="btn-tertiary" style="margin-top: 10px;">Sair</button>
            </div>
        </div>
    </div>

    <!-- Scripts (ORDEM CORRETA É IMPORTANTE!) -->
    <!-- 1. Utilitários -->
    <script src="js/utils/Random.js"></script>
    
    <!-- 2. Classes de Dados -->
    <script src="js/game/Character.js"></script>
    <script src="js/game/PartyManager.js"></script>
    
    <!-- 3. Geradores -->
    <script src="js/game/SeedManager.js"></script>
    <script src="js/game/RoomGenerator.js"></script>
    <script src="js/game/RoomContentGenerator.js"></script>
    <script src="js/game/DungeonMap.js"></script>
    
    <!-- 4. Engine Principal -->
    <script src="js/game/GameEngine.js"></script>
    
    <!-- 5. Renderizadores UI -->
    <script src="js/game/ui/RoomRenderer.js"></script>
    <script src="js/game/ui/ContentRenderer.js"></script>
    <script src="js/game/ui/ControlsRenderer.js"></script>
    <script src="js/game/ui/PartyRenderer.js"></script>
    
    <!-- 6. Aplicação Principal -->
    <script src="js/main.js"></script>
    
    <script>
        console.log("Página carregada. Verificando erros...");
        
        // Teste básico
        document.addEventListener('DOMContentLoaded', function() {
            console.log("DOM completamente carregado e analisado");
            
            // Testa se elementos principais existem
            const elements = [
                'start-screen', 'class-select-screen', 'game-screen',
                'new-game-btn', 'class-grid', 'current-room-container'
            ];
            
            elements.forEach(id => {
                const el = document.getElementById(id);
                console.log(`${id}: ${el ? 'OK' : 'FALTA'}`);
            });
        });
    </script>
</body>
</html>